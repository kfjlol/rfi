<?php
/**
 * inits option panel
 *
 * @package    Axiom
 * @author     averta
 * @copyright  Copyright (c) averta co
 * @version    Release: 1.0
 * @link       http://www.averta.net
 */

global $axi_default_options;

// default theme options
$axi_default_options = 'a:121:{i:0;a:2:{s:4:"name";s:17:"site_layout_style";s:5:"value";s:4:"full";}i:1;a:2:{s:4:"name";s:25:"enable_site_reponsiveness";s:5:"value";s:7:"checked";}i:2;a:2:{s:4:"name";s:26:"site_body_background_color";s:5:"value";s:7:"#eeeeee";}i:3;a:2:{s:4:"name";s:28:"site_body_background_pattern";s:5:"value";s:0:"";}i:4;a:2:{s:4:"name";s:33:"site_body_background_custom_image";s:5:"value";s:0:"";}i:5;a:2:{s:4:"name";s:27:"site_body_background_repeat";s:5:"value";s:6:"repeat";}i:6;a:2:{s:4:"name";s:31:"site_body_background_attachment";s:5:"value";s:5:"fixed";}i:7;a:2:{s:4:"name";s:29:"site_body_background_position";s:5:"value";s:8:"left top";}i:8;a:2:{s:4:"name";s:16:"site_header_logo";s:5:"value";s:92:"http://127.0.0.1/www/wordpress/en/wp-content/themes/lotus/admin/images/brands/theme-logo.png";}i:9;a:2:{s:4:"name";s:19:"site_header_logo_2x";s:5:"value";s:0:"";}i:10;a:2:{s:4:"name";s:22:"site_header_logo_width";s:5:"value";s:3:"200";}i:11;a:2:{s:4:"name";s:15:"site_favicon_16";s:5:"value";s:0:"";}i:12;a:2:{s:4:"name";s:21:"axiom_user_custom_css";s:5:"value";s:0:"";}i:13;a:2:{s:4:"name";s:20:"axiom_user_custom_js";s:5:"value";s:0:"";}i:14;a:2:{s:4:"name";s:28:"enable_custom_general_colors";s:5:"value";s:7:"checked";}i:15;a:2:{s:4:"name";s:15:"site_body_color";s:5:"value";s:7:"#ffffff";}i:16;a:2:{s:4:"name";s:23:"site_general_link_color";s:5:"value";s:7:"#b2c0cd";}i:17;a:2:{s:4:"name";s:29:"site_general_link_hover_color";s:5:"value";s:7:"#8f9ba8";}i:18;a:2:{s:4:"name";s:13:"feature_color";s:5:"value";s:7:"#78acc2";}i:19;a:2:{s:4:"name";s:13:"divider_color";s:5:"value";s:7:"#b9b9b9";}i:20;a:2:{s:4:"name";s:15:"font_icon_color";s:5:"value";s:7:"#78acc2";}i:21;a:2:{s:4:"name";s:19:"callout_btn_bgcolor";s:5:"value";s:7:"#78acc2";}i:22;a:2:{s:4:"name";s:24:"content_typography[face]";s:5:"value";s:9:"Open Sans";}i:23;a:2:{s:4:"name";s:25:"content_typography[color]";s:5:"value";s:7:"#3d3d3d";}i:24;a:2:{s:4:"name";s:27:"main_title_typography[face]";s:5:"value";s:9:"Open Sans";}i:25;a:2:{s:4:"name";s:28:"main_title_typography[color]";s:5:"value";s:7:"#6d6d6d";}i:26;a:2:{s:4:"name";s:27:"page_title_typography[face]";s:5:"value";s:6:"Roboto";}i:27;a:2:{s:4:"name";s:28:"page_title_typography[color]";s:5:"value";s:7:"#3d3d3d";}i:28;a:2:{s:4:"name";s:25:"stunning_typography[face]";s:5:"value";s:6:"Ubuntu";}i:29;a:2:{s:4:"name";s:26:"stunning_typography[color]";s:5:"value";s:7:"#3d3d3d";}i:30;a:2:{s:4:"name";s:28:"header_menu_typography[face]";s:5:"value";s:9:"Open Sans";}i:31;a:2:{s:4:"name";s:8:"facebook";s:5:"value";s:1:"#";}i:32;a:2:{s:4:"name";s:7:"twitter";s:5:"value";s:1:"#";}i:33;a:2:{s:4:"name";s:5:"gplus";s:5:"value";s:1:"#";}i:34;a:2:{s:4:"name";s:7:"dribble";s:5:"value";s:0:"";}i:35;a:2:{s:4:"name";s:7:"youtube";s:5:"value";s:1:"#";}i:36;a:2:{s:4:"name";s:5:"vimeo";s:5:"value";s:0:"";}i:37;a:2:{s:4:"name";s:6:"vimeo2";s:5:"value";s:1:"#";}i:38;a:2:{s:4:"name";s:7:"flicker";s:5:"value";s:1:"#";}i:39;a:2:{s:4:"name";s:4:"digg";s:5:"value";s:0:"";}i:40;a:2:{s:4:"name";s:6:"stuble";s:5:"value";s:0:"";}i:41;a:2:{s:4:"name";s:6:"lastfm";s:5:"value";s:0:"";}i:42;a:2:{s:4:"name";s:9:"delicious";s:5:"value";s:0:"";}i:43;a:2:{s:4:"name";s:5:"skype";s:5:"value";s:0:"";}i:44;a:2:{s:4:"name";s:8:"linkedin";s:5:"value";s:1:"#";}i:45;a:2:{s:4:"name";s:6:"tumblr";s:5:"value";s:0:"";}i:46;a:2:{s:4:"name";s:8:"istagram";s:5:"value";s:0:"";}i:47;a:2:{s:4:"name";s:3:"rss";s:5:"value";s:1:"#";}i:48;a:2:{s:4:"name";s:14:"show_topheader";s:5:"value";s:7:"checked";}i:49;a:2:{s:4:"name";s:22:"show_socials_in_header";s:5:"value";s:7:"checked";}i:50;a:2:{s:4:"name";s:21:"show_search_in_header";s:5:"value";s:7:"checked";}i:51;a:2:{s:4:"name";s:33:"site_top_header_background_color1";s:5:"value";s:7:"#3d3d3d";}i:52;a:2:{s:4:"name";s:27:"site_top_header_text_color1";s:5:"value";s:7:"#b9b9b9";}i:53;a:2:{s:4:"name";s:17:"topheader_message";s:5:"value";s:14:"custom message";}i:54;a:2:{s:4:"name";s:26:"enable_header_custom_style";s:5:"value";s:7:"checked";}i:55;a:2:{s:4:"name";s:28:"site_header_container_height";s:5:"value";s:2:"85";}i:56;a:2:{s:4:"name";s:29:"site_header_background_color1";s:5:"value";s:7:"#ffffff";}i:57;a:2:{s:4:"name";s:31:"site_header_border_bottom_color";s:5:"value";s:7:"#ffffff";}i:58;a:2:{s:4:"name";s:29:"site_header_navigation_height";s:5:"value";s:2:"85";}i:59;a:2:{s:4:"name";s:31:"site_header_nav_main_text_color";s:5:"value";s:7:"#3d3d3d";}i:60;a:2:{s:4:"name";s:35:"site_header_nav_main_hover_bg_color";s:5:"value";s:7:"#f5f5f5";}i:61;a:2:{s:4:"name";s:37:"site_header_nav_main_hover_text_color";s:5:"value";s:7:"#3d3d3d";}i:62;a:2:{s:4:"name";s:34:"site_header_nav_submenu_text_color";s:5:"value";s:7:"#ffffff";}i:63;a:2:{s:4:"name";s:40:"site_header_nav_submenu_hover_text_color";s:5:"value";s:7:"#999999";}i:64;a:2:{s:4:"name";s:32:"site_header_nav_current_bg_color";s:5:"value";s:7:"#f5f5f5";}i:65;a:2:{s:4:"name";s:34:"site_header_nav_current_text_color";s:5:"value";s:7:"#3d3d3d";}i:66;a:2:{s:4:"name";s:36:"site_header_nav_current_border_color";s:5:"value";s:7:"#b2c0cd";}i:67;a:2:{s:4:"name";s:29:"site_header_background_color2";s:5:"value";s:7:"#6c7479";}i:68;a:2:{s:4:"name";s:40:"site_header_nav_submenu_top_border_color";s:5:"value";s:7:"#fcfcfc";}i:69;a:2:{s:4:"name";s:43:"site_header_nav_submenu_bottom_border_color";s:5:"value";s:7:"#e5e5e5";}i:70;a:2:{s:4:"name";s:21:"blog_sidebar_position";s:5:"value";s:13:"right-sidebar";}i:71;a:2:{s:4:"name";s:23:"blog_content_on_listing";s:5:"value";s:7:"excerpt";}i:72;a:2:{s:4:"name";s:24:"blog_related_posts_title";s:5:"value";s:13:"Related Posts";}i:73;a:2:{s:4:"name";s:23:"blog_related_posts_size";s:5:"value";s:12:"three-column";}i:74;a:2:{s:4:"name";s:22:"blog_view_all_btn_link";s:5:"value";s:0:"";}i:75;a:2:{s:4:"name";s:25:"blog_category_page_layout";s:5:"value";s:4:"full";}i:76;a:2:{s:4:"name";s:30:"blog_category_sidebar_position";s:5:"value";s:13:"right-sidebar";}i:77;a:2:{s:4:"name";s:21:"news_sidebar_position";s:5:"value";s:13:"right-sidebar";}i:78;a:2:{s:4:"name";s:23:"news_content_on_listing";s:5:"value";s:7:"excerpt";}i:79;a:2:{s:4:"name";s:24:"news_related_posts_title";s:5:"value";s:12:"Related News";}i:80;a:2:{s:4:"name";s:23:"news_related_posts_size";s:5:"value";s:12:"three-column";}i:81;a:2:{s:4:"name";s:22:"news_view_all_btn_link";s:5:"value";s:0:"";}i:82;a:2:{s:4:"name";s:28:"show_portfolio_related_items";s:5:"value";s:7:"checked";}i:83;a:2:{s:4:"name";s:29:"portfolio_related_items_title";s:5:"value";s:16:"Related Projects";}i:84;a:2:{s:4:"name";s:28:"portfolio_related_items_size";s:5:"value";s:12:"three-column";}i:85;a:2:{s:4:"name";s:25:"portfolio_single_nav_type";s:5:"value";s:10:"breadcrumb";}i:86;a:2:{s:4:"name";s:25:"portfolio_show_share_btns";s:5:"value";s:7:"checked";}i:87;a:2:{s:4:"name";s:28:"portfolio_custom_meta_label1";s:5:"value";s:6:"Skills";}i:88;a:2:{s:4:"name";s:28:"portfolio_custom_meta_label2";s:5:"value";s:12:"Release Date";}i:89;a:2:{s:4:"name";s:28:"portfolio_custom_meta_label3";s:5:"value";s:6:"Client";}i:90;a:2:{s:4:"name";s:28:"portfolio_custom_meta_label4";s:5:"value";s:9:"Copyright";}i:91;a:2:{s:4:"name";s:28:"portfolio_custom_meta_label5";s:5:"value";s:0:"";}i:92;a:2:{s:4:"name";s:28:"portfolio_custom_meta_label6";s:5:"value";s:0:"";}i:93;a:2:{s:4:"name";s:28:"portfolio_custom_meta_label7";s:5:"value";s:0:"";}i:94;a:2:{s:4:"name";s:28:"portfolio_custom_meta_label8";s:5:"value";s:0:"";}i:95;a:2:{s:4:"name";s:28:"portfolio_custom_meta_label9";s:5:"value";s:0:"";}i:96;a:2:{s:4:"name";s:26:"show_product_related_items";s:5:"value";s:7:"checked";}i:97;a:2:{s:4:"name";s:27:"product_related_items_title";s:5:"value";s:16:"Related Products";}i:98;a:2:{s:4:"name";s:26:"product_related_items_size";s:5:"value";s:12:"three-column";}i:99;a:2:{s:4:"name";s:23:"product_single_nav_type";s:5:"value";s:10:"breadcrumb";}i:100;a:2:{s:4:"name";s:23:"product_show_share_btns";s:5:"value";s:7:"checked";}i:101;a:2:{s:4:"name";s:27:"product_regular_price_label";s:5:"value";s:13:"Regular Price";}i:102;a:2:{s:4:"name";s:21:"product_buy_btn_label";s:5:"value";s:7:"Buy Now";}i:103;a:2:{s:4:"name";s:29:"product_custom_meta_label_0_1";s:5:"value";s:12:"Manufacturer";}i:104;a:2:{s:4:"name";s:29:"product_custom_meta_label_0_2";s:5:"value";s:12:"Release Date";}i:105;a:2:{s:4:"name";s:29:"product_custom_meta_label_0_3";s:5:"value";s:11:"Part Number";}i:106;a:2:{s:4:"name";s:29:"product_custom_meta_label_0_4";s:5:"value";s:10:"Dimensions";}i:107;a:2:{s:4:"name";s:29:"product_custom_meta_label_0_5";s:5:"value";s:0:"";}i:108;a:2:{s:4:"name";s:29:"product_custom_meta_label_0_6";s:5:"value";s:0:"";}i:109;a:2:{s:4:"name";s:29:"product_custom_meta_label_0_7";s:5:"value";s:0:"";}i:110;a:2:{s:4:"name";s:29:"product_custom_meta_label_0_8";s:5:"value";s:0:"";}i:111;a:2:{s:4:"name";s:29:"product_custom_meta_label_0_9";s:5:"value";s:0:"";}i:112;a:2:{s:4:"name";s:30:"product_custom_meta_label_0_10";s:5:"value";s:0:"";}i:113;a:2:{s:4:"name";s:20:"layout-4_25-25-25-25";s:5:"value";s:7:"checked";}i:114;a:2:{s:4:"name";s:22:"show_socials_in_footer";s:5:"value";s:7:"checked";}i:115;a:2:{s:4:"name";s:20:"site_footer_bg_color";s:5:"value";s:7:"#1a1a1a";}i:116;a:2:{s:4:"name";s:22:"site_footer_text_color";s:5:"value";s:7:"#6d6d6d";}i:117;a:2:{s:4:"name";s:21:"site_footer_sep_color";s:5:"value";s:7:"#292929";}i:118;a:2:{s:4:"name";s:9:"copyright";s:5:"value";s:36:"© 2013 Company. All rights reserved";}i:119;a:2:{s:4:"name";s:17:"sidebar_add_field";s:5:"value";s:0:"";}i:120;a:2:{s:4:"name";s:20:"axiom_import_options";s:5:"value";s:0:"";}}';
$axi_default_options =  unserialize($axi_default_options);


require(ADMIN_INC.'options/styling/functions.php');

require(ADMIN_INC.'options/axiom-panel-output.php');

require(ADMIN_INC.'options/axiom-panel-ajax.php');


/*-----------------------------------------------------------------------------------*/
/*	Register Option Page Menu and submenu
/*-----------------------------------------------------------------------------------*/

add_action('admin_menu', 'av3_register_option_page');

function av3_register_option_page(){
	global $submenu;
	
	add_menu_page(
		__('Option Panel','default'),   // [Title]    The title to be displayed on the corresponding page for this menu
		__(THEME_NAME.' Options', 'default'), // [Text]     The text to be displayed for this actual menu item
		'administrator',				// [User]     Which type of users can see this menu
		'axiom',						// [ID]       The unique ID - that is, the slug - for this menu item
		'axiom_init_options',			// [Callback] The name of the function to call when rendering the menu for this page
        '',                             // [Icon]     The url to the icon to be used for this menu. This parameter is optional.
		47								// [Position] The position in the menu order this menu should appear
	);
}

/*-----------------------------------------------------------------------------------*/
/*  Reset option Panel
/*-----------------------------------------------------------------------------------*/

// store default theme options
function axiom_reset_theme_options() {
    global $axi_default_options, $axiom_options;
    
    update_option( THEME_ID.'_options' , $axi_default_options);
    // update current in use theme options
    $axiom_options = format_axiom_options( $axi_default_options);
    // save formatted/usable options
    update_option( THEME_ID.'_formatted_options' , $axiom_options);
}


/*-----------------------------------------------------------------------------------*/
/*  Push default option, if it is not set before
/*-----------------------------------------------------------------------------------*/

// setup and store theme options if this is the first time activition
function axiom_setup_theme_options() {
    
    $th_options = get_option( THEME_ID.'_options');
    
    // temporary command in ver 1.5 -------------------------------------
    $th_formated_options = get_option( THEME_ID.'_formatted_options');
    if(!isset($th_formated_options) || empty($th_formated_options)){
        $f_options = format_axiom_options( $th_options);
        update_option( THEME_ID.'_formatted_options' , $f_options);
    }
    // ------------------------------------------------------------------
    
    if(isset($th_options) && !empty($th_options)) return;
    
    axiom_reset_theme_options();
    add_action('admin_init', 'axi_save_custom_styles' , 12);
}

function axiom_save_styles_on_theme_activation() {
    add_action('admin_init', 'axi_save_custom_styles', 12);
}

// trigger when theme will be actived, wp 3.3
add_action( 'after_switch_theme', 'axiom_setup_theme_options' );
add_action( 'after_switch_theme', 'axiom_save_styles_on_theme_activation' );

add_action( 'admin_init', 'axiom_setup_theme_options' );

/*-----------------------------------------------------------------------------------*/
/*  Check if custom css file is writable
/*-----------------------------------------------------------------------------------*/

// display notice if user need to set permission for directory
function axiom_notice_custom_css_permission(){
    $css_file  = get_template_directory() . '/css/other';
    
    echo '<div class="updated">
       <p>'.__("This theme needs permission to write custom styles in css file.Please change directory permission at ( [current_theme]/css/other ) to 644 or higher","default").'</p>
       <p>'.__("If you changed the permission and still see this message follow the instructions here.", "default").' <a href="http://themeforest.net/item/lotus-flexible-multipurpose-responsive-wp-theme/3909293/faqs/14219">'.__("the solution","default").'</a></p>
       <p>'.__("File system method is :", "default").' '.get_filesystem_method(array(), $css_file) .'</p>
    </div>';
}

function axiom_check_custom_css_writable() {
    
    /*
    $th_options = get_option( THEME_ID.'_options');
    $th_options = serialize($th_options);
    print_r($th_options); */
    
    $css_file  = get_template_directory() . '/css/other';
    if(!axiom_is_dir_writable($css_file)){
        //add_action('admin_notices', 'axiom_notice_custom_css_permission');
        
        if(!function_exists('get_filesystem_method')) echo '"get_filesystem_method" function does not exist.<br />';
    }
}
add_action( 'admin_init', 'axiom_check_custom_css_writable' );


/*-----------------------------------------------------------------------------------*/
/*  
/*-----------------------------------------------------------------------------------*/




?>